<?xml version="1.0" encoding="UTF-8"?><xhtml:html xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xforms="http://www.w3.org/2002/xforms" xmlns:xhtml="http://www.w3.org/1999/xhtml">
     <xhtml:head>
          <xhtml:title>11.4.b accessing context information for xforms-submit-done event</xhtml:title>
          <xforms:model id="gen-1">
               <xforms:instance id="data">
                    <this>
                         <that>
                              <the_other>
							  this that and the other...
						      </the_other>
                         </that>
                    </this>
               </xforms:instance>
               <xforms:instance id="event_catcher">
                    <eventinfo>
                         <return_code/>
                         <response_headers/>
                    </eventinfo>
               </xforms:instance>
               <xforms:submission action="http://xformstest.org/cgi-bin/echo.sh" id="sub_1" method="post" ref="instance('data')" replace="none">
                    <xforms:action ev:event="xforms-submit-done" id="gen-5">
                         <xforms:setvalue ref="instance('event_catcher')/return_code" value="event('response-status-code')" id="gen-6"/>
                         <!--  xforms 1.1 will return header[] from event('response-headers') -->
                         <xforms:insert context="instance('event_catcher')/response_headers" nodeset="*" origin="event('response-headers')" id="gen-7"/>
                    </xforms:action>
               </xforms:submission>
          </xforms:model>
          <xhtml:link rel="stylesheet" href="/apps/xforms-test-suite/TestSuite11.css" type="text/css"/>
     </xhtml:head>
     <xhtml:body>
          <xforms:group id="gen-8">
               <xforms:label class="title" id="gen-9">11.4.b accessing context information for xforms-submit-done event</xforms:label>
          </xforms:group>
          <xforms:group id="gen-10">
               <xforms:label id="gen-11">
                 When you activate the Submit Now submission control the instance data of the form will be 
                 submitted but the page will not be replaced by the form data. If the submission is successful, 
                 the protocol response code will be displayed in the Response Status Code output. If there are any 
                 header names or values returned they will be displayed in the Response Headers output. 
			</xforms:label>
          </xforms:group>
          <xforms:group id="gen-12">
               <xforms:label id="gen-13"/>
               <xforms:submit submission="sub_1" id="gen-14">
                    <xforms:label id="gen-15">Submit Now</xforms:label>
               </xforms:submit>
          </xforms:group>
          <xforms:group id="gen-16">
               <xforms:label id="gen-17"/>
               <xforms:output ref="instance('event_catcher')/return_code" id="gen-18">
                    <xforms:label id="gen-19">Response Status Code : </xforms:label>
               </xforms:output>
          </xforms:group>
          <xforms:group id="gen-20">
               <xforms:label id="gen-21">Response Headers : </xforms:label>
               <xforms:repeat nodeset="instance('event_catcher')/response_headers/header" id="gen-22">
                    <xforms:group id="gen-23">
                         <xforms:label id="gen-24"/>
                         <xforms:output ref="./name" id="gen-25">
                              <xforms:label id="gen-26">Header Name : </xforms:label>
                         </xforms:output>
                    </xforms:group>
                    <xforms:group id="gen-27">
                         <xforms:label id="gen-28"/>
                         <xforms:output ref="./value" id="gen-29">
                              <xforms:label id="gen-30">Header Contents : </xforms:label>
                         </xforms:output>
                    </xforms:group>
               </xforms:repeat>
          </xforms:group>
		
     </xhtml:body>
</xhtml:html>