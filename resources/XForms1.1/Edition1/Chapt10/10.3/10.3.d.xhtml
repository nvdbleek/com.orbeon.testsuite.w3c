<?xml version="1.0" encoding="UTF-8"?><xhtml:html xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xforms="http://www.w3.org/2002/xforms" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xhtml:head>
        <xhtml:title>10.3.d insert action using at attribute</xhtml:title>
        <xforms:model id="mod1">
            <xforms:instance id="first">
                <number_lists>
                    <number_list>
                        <number>1</number>
                        <number>2</number>
                        <number>3</number>
                        <number>4</number>
                        <number>5</number>
                    </number_list>
                    <number_list/>
                </number_lists>
            </xforms:instance>
        </xforms:model>
        <xhtml:link rel="stylesheet" href="/apps/xforms-test-suite/TestSuite11.css" type="text/css"/>
    </xhtml:head>
    <xhtml:body>
        <xforms:group id="gen-3">
            <xforms:label class="title" id="gen-4">10.3.d insert action using at attribute</xforms:label>
        </xforms:group>
        <xforms:group id="gen-5">
            <xforms:label id="gen-6">
              After activating any of the Test triggers the integer sequence must match the one on 
              the label of the activated trigger. 
            </xforms:label>
        </xforms:group>
        <xforms:group id="gen-7">
            <xforms:trigger id="gen-8">
                <xforms:label id="gen-9">Test A: 1 2 3 4 5 5</xforms:label>
                <xforms:action ev:event="DOMActivate" id="gen-10">
                    <xforms:reset model="mod1" id="gen-11"/>
                    <!-- without at attribute, should take last position -->
                    <xforms:insert nodeset="number_list[1]/number" id="gen-12"/>
                </xforms:action>
            </xforms:trigger>
            <xforms:trigger id="gen-13">
                <xforms:label id="gen-14">Test B: 1 2 5 3 4 5</xforms:label>
                <xforms:action ev:event="DOMActivate" id="gen-15">
                    <xforms:reset model="mod1" id="gen-16"/>
                    <!-- at attribute is not an integer, round up to index 2 -->
                    <xforms:insert nodeset="number_list/number" at="1.5" id="gen-17"/>
                </xforms:action>
            </xforms:trigger>
            <xforms:trigger id="gen-18">
                <xforms:label id="gen-19">Test C: 1 2 3 5 4 5</xforms:label>
                <xforms:action ev:event="DOMActivate" id="gen-20">
                    <xforms:reset model="mod1" id="gen-21"/>
                    <!-- at attribute between 1 and node-set size -->
                    <xforms:insert nodeset="number_list/number" at="3" id="gen-22"/>
                </xforms:action>
            </xforms:trigger>
            <xforms:trigger id="gen-23">
                <xforms:label id="gen-24">Test D: 1 5 2 3 4 5</xforms:label>
                <xforms:action ev:event="DOMActivate" id="gen-25">
                    <xforms:reset model="mod1" id="gen-26"/>
                    <!-- at attribute less than 1 -->
                    <xforms:insert nodeset="number_list/number" at="-2" id="gen-27"/>
                </xforms:action>
            </xforms:trigger>
            <xforms:trigger id="gen-28">
                <xforms:label id="gen-29">Test E: 1 2 3 4 5 5</xforms:label>
                <xforms:action ev:event="DOMActivate" id="gen-30">
                    <xforms:reset model="mod1" id="gen-31"/>
                     <!-- at attribute greater than node-set size -->
                     <xforms:insert nodeset="number_list/number" at="6" id="gen-32"/>
                </xforms:action>
            </xforms:trigger>
            <xforms:trigger id="gen-33">
                <xforms:label id="gen-34">Test F: 1 2 3 4 5 5</xforms:label>
                <xforms:action ev:event="DOMActivate" id="gen-35">
                    <xforms:reset model="mod1" id="gen-36"/>
                     <!-- at attribute is NaN -->
                     <xforms:insert nodeset="number_list/number" at="'foo'" id="gen-37"/>
                </xforms:action>
            </xforms:trigger>
            <xforms:trigger id="gen-38">
                <xforms:label id="gen-39">Test G: List sizes remain 5 and 0, respectively</xforms:label>
                <xforms:action ev:event="DOMActivate" id="gen-40">
                    <xforms:reset model="mod1" id="gen-41"/>
                     <!-- empty node-set, at is ignored -->
                     <xforms:insert nodeset="number_list[2]/number" at="2" id="gen-42"/>
                </xforms:action>
            </xforms:trigger>
        </xforms:group>
        <xforms:group id="gen-43">
            <xforms:label id="gen-44">Integer sequence: </xforms:label>
        </xforms:group>
        <xforms:repeat nodeset="number_list[1]/number" id="gen-45">
            <xforms:output value="." id="gen-46">
                <xforms:label id="gen-47"/>
            </xforms:output>
        </xforms:repeat>
        <xforms:output value="count(number_list[1]/number)" id="gen-48">
            <xforms:label id="gen-49">Size of List X: </xforms:label>
        </xforms:output>
        <xforms:output value="count(number_list[2]/number)" id="gen-50">
            <xforms:label id="gen-51">Size of List Y: </xforms:label>
        </xforms:output>
    </xhtml:body>
</xhtml:html>