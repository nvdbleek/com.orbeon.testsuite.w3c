<?xml version="1.0" encoding="UTF-8"?><xhtml:html xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xforms="http://www.w3.org/2002/xforms">
  	<xhtml:head>
    	<xhtml:title>10.3.f insert action in repeat bound to collection</xhtml:title>
    	<xhtml:link rel="stylesheet" href="/apps/xforms-test-suite/TestSuite11.css" type="text/css"/>
    	<xforms:model id="gen-1">
       		<xforms:instance id="gen-2">
				<lines>
					<line name="a">
						<price>3.00</price>
					</line>
					<line name="b">
						<price>32.25</price>
					</line>
					<line name="c">
						<price>132.99</price>
					</line>
				</lines>
       		</xforms:instance>
       		<xforms:instance id="i2">
       			<indexvalue/>
       		</xforms:instance>
       		<xforms:bind nodeset="instance('i2')" calculate="index('lineset')" id="gen-4"/>
			<xforms:action ev:event="xforms-insert" id="gen-5">
				<xforms:message level="modal" id="gen-6">xforms-insert</xforms:message>
			</xforms:action>
    	</xforms:model>
  	</xhtml:head>
  	<xhtml:body>
  		<xforms:group id="gen-7">
  			<xforms:label class="title" id="gen-8">10.3.f insert action in repeat bound to collection</xforms:label>
  		</xforms:group>	
  		<xforms:group id="gen-9">
  			<xforms:label id="gen-10">
  			  You must see an xforms-insert message after activating any of the Insert triggers. 
  			  The Insert At index 1 trigger must insert a new item at the beginning of the list. 
  			  The Insert At index 2 trigger must insert a new item after the first one in the list. 
  			  The Insert At index 100 trigger must insert a new item at the end of the list. 
  			  A new item with have a value of "0.00" for Price and no value for Name. 
			</xforms:label>	
  		</xforms:group>
		<xforms:repeat id="lineset" nodeset="/lines/line">
			<xforms:group id="gen-12">
				<xforms:input ref="price" id="gen-13">
					<xforms:label id="gen-14">Price:</xforms:label>
				</xforms:input>
				<xforms:input ref="@name" id="gen-15">
					<xforms:label id="gen-16">Name:</xforms:label>
				</xforms:input>
			</xforms:group>
		</xforms:repeat>
		<xforms:trigger id="gen-17">
			<xforms:label id="gen-18">Insert At index 1</xforms:label>
			<xforms:action ev:event="DOMActivate" id="gen-19">
				<!-- should insert at index 1 -->
				<xforms:insert nodeset="/lines/line" at="1" position="before" id="gen-20"/>
				<xforms:setvalue ref="/lines/line[index('lineset')]/@name" id="gen-21"/>
				<xforms:setvalue ref="/lines/line[index('lineset')]/price" id="gen-22">0.00</xforms:setvalue>
			</xforms:action>
		</xforms:trigger>
		<xforms:trigger id="gen-23">
			<xforms:label id="gen-24">Insert At index 1.5</xforms:label>
			<xforms:action ev:event="DOMActivate" id="gen-25">
				<!-- should insert at index 2 -->
				<xforms:insert nodeset="/lines/line" at="1.5" position="before" id="gen-26"/>
				<xforms:setvalue ref="/lines/line[index('lineset')]/@name" id="gen-27"/>
				<xforms:setvalue ref="/lines/line[index('lineset')]/price" id="gen-28">0.00</xforms:setvalue>
			</xforms:action>
		</xforms:trigger>
		<xforms:trigger id="gen-29">
			<xforms:label id="gen-30">Insert At index 100</xforms:label>
			<xforms:action ev:event="DOMActivate" id="gen-31">
				<xforms:insert nodeset="/lines/line" at="100" position="after" id="gen-32"/>
				<xforms:setvalue ref="/lines/line[index('lineset')]/@name" id="gen-33"/>
				<xforms:setvalue ref="/lines/line[index('lineset')]/price" id="gen-34">0.00</xforms:setvalue>
			</xforms:action>
		</xforms:trigger>
		<xforms:output ref="instance('i2')" id="gen-35">
			<xforms:label id="gen-36">index=</xforms:label>
		</xforms:output>
		
  </xhtml:body>
</xhtml:html>